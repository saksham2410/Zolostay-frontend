(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,a){e.exports=a(81)},39:function(e,t,a){},59:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(17),s=a.n(r),c=(a(39),a(1)),o=a(2),i=a(4),m=a(3),u=a(5),h=a(7),d=a(12),p=a(29),E=a.n(p).a.create({baseURL:"http://localhost:3005"}),f=(a(59),a(30)),g=a.n(f),v=function(e){return l.a.createElement("div",{className:"spinner-border"})},b=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={rating:0},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState(function(){return{rating:e.props.rating}})}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"}),l.a.createElement("span",{className:"fa fa-star",style:{color:this.state.rating>=1?"orange":"grey"}}),l.a.createElement("span",{className:"fa fa-star",style:{color:this.state.rating>=3?"orange":"grey"}}),l.a.createElement("span",{className:"fa fa-star",style:{color:this.state.rating>=5?"orange":"grey"}}),l.a.createElement("span",{className:"fa fa-star",style:{color:this.state.rating>=7?"orange":"grey"}}),l.a.createElement("span",{className:"fa fa-star",style:{color:this.state.rating>=9?"orange":"grey"}}),(0==this.state.rating||null==this.state.rating)&&l.a.createElement("h6",{className:"text text-danger"}," No reviews yet "))}}]),t}(l.a.Component),N=a(31),y=a.n(N),w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={rating:a.props.reviews[0].rating},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"container-fluid"},l.a.createElement("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"}),l.a.createElement("div",{className:"row row-no-gutters"},l.a.createElement("div",{className:"col-md-8 offset-md-2"},l.a.createElement("div",{className:"row mt-2 border border-dark rounded"},l.a.createElement("div",{className:"col-md-8 "},l.a.createElement("h5",{className:"card-title mt-1"},l.a.createElement(h.b,{to:"/hotels/".concat(this.props.id)},this.props.name)),l.a.createElement("a",{"data-tip":!0,"data-for":"rating"},this.state.rating,l.a.createElement(b,{rating:this.state.rating,className:"mb-3"})," "),l.a.createElement(y.a,{id:"rating",type:"error"},this.state.rating),l.a.createElement("p",null,"Tags: ",this.props.categories),l.a.createElement("hr",null),l.a.createElement("p",null,l.a.createElement("span",{className:"fa fa-map-marker"}," ",this.props.city," ")," "),l.a.createElement("hr",null),l.a.createElement(h.b,{to:"/hotels/".concat(this.props.id)},l.a.createElement("button",{className:"btn btn-primary mb-1"},"More details"))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("img",{src:"https://via.placeholder.com/175x200",style:{float:"right",margin:"0px -15px 0px 0px",height:"100%",width:"100%"}}))))))}}]),t}(l.a.Component),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){var t=e.target.value;a.setState(function(){return{search:t}}),a.props.handleSearch(t)},a.state={search:""},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("form",{className:"mt-2 "},l.a.createElement("div",{className:"form-group has-feedback"},l.a.createElement("label",{className:"sr-only"},"Search"),l.a.createElement("input",{type:"search",value:this.state.search,onChange:this.handleChange,className:"form-control",name:"search",id:"search",placeholder:"Search hotels by name,city and categories"}),l.a.createElement("span",{className:"glyphicon glyphicon-search form-control-feedback"}))))}}]),t}(l.a.Component),O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).change=function(e){e.persist(),a.props.handleFilter(e.target.value)},a.state={value:"highToLow"},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("form",{className:"form-inline",onChange:this.change,value:this.state.value},l.a.createElement("label",{className:"my-1 mr-2"},"Sory by Rating"),l.a.createElement("select",{className:"custom-select my-1 mr-sm-2"},l.a.createElement("option",{value:"highToLow",defaultValue:!0},"High to low"),l.a.createElement("option",{value:"lowToHigh"},"Low to high"))))}}]),t}(l.a.Component),j=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleSearch=function(e){var t=e.toLowerCase();a.setState(function(e){return{filteredHotels:e.hotels.filter(function(e){return e.name.toLowerCase().includes(t)||e.city.toLowerCase().includes(t)||e.categories.toLowerCase().includes(t)})}})},a.handleFilter=function(e){console.log("here"),"highToLow"===e?a.setState(function(e){return{filteredHotels:e.hotels.slice(0,10)}}):a.setState(function(e){return{filteredHotels:e.hotelsDesc.slice(0,10)}})},a.fetchMoreData=function(){a.setState(function(e){return{isNewHotelsLoading:!e.isLoad}}),setTimeout(function(e){a.setState(function(e){return{limit:e.limit+10,filteredHotels:e.hotels.slice(0,e.limit+10)}})},1e3)},a.state={hotels:[],hotelsDesc:[],filteredHotels:[],limit:10,isLoaded:!1,isNewHotelsLoading:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.get("/hotels").then(function(t){e.setState(function(){return{hotels:t.data,hotelsDesc:t.data.sort(function(e,t){return e.reviews[0].rating-t.reviews[0].rating}),filteredHotels:t.data.sort(function(e,t){return t.reviews[0].rating-e.reviews[0].rating}).slice(0,10),isLoaded:!0}})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"row mt-5",style:{height:"100%",width:"100%"}},l.a.createElement("div",null,this.state.isLoaded?l.a.createElement("div",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8"},l.a.createElement(k,{handleSearch:this.handleSearch})),l.a.createElement("div",{className:"col-md-4"},l.a.createElement(O,{handleFilter:this.handleFilter}))),l.a.createElement("ul",null,l.a.createElement(g.a,{dataLength:this.state.filteredHotels.length,next:this.fetchMoreData,hasMore:!0,loader:this.state.filteredHotels.length===this.state.hotels.length?l.a.createElement("h2",null,"That's all with us "):l.a.createElement("h4",null,"Loading...",l.a.createElement(v,null))},this.state.filteredHotels.map(function(e){return l.a.createElement(w,{key:e._id,id:e._id,name:e.name,address:e.address,city:e.city,reviews:e.reviews,categories:e.categories})}))),l.a.createElement("div",{className:"row"}),l.a.createElement("div",{className:"row"})):l.a.createElement(v,null))))}}]),t}(l.a.Component),C=a(13),S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleForm=function(e){e.preventDefault();var t={hotelName:a.state.hotel.name,name:a.state.name,email:a.state.email,mobile:a.state.mobile,noOfGuests:a.state.noGuests,checkInDate:a.state.checkInDate,checkOutDate:a.state.checkOutDate};E.post("/bookings",t).then(function(e){alert("Room booked"),a.props.history.push("/")}).catch(function(e){return console.log(e)})},a.handleBook=function(){localStorage.getItem("token")?a.setState(function(e){return{viewForm:!e.viewForm}}):a.setState(function(){return{displayAlert:!0}})},a.handleChange=function(e){e.persist(),a.setState(function(){return Object(C.a)({},e.target.name,e.target.value)})},a.state={displayAlert:!1,hotel:{},isLoaded:!1,viewForm:!1,name:"",email:"",mobile:"",noGuests:0,checkInDate:"",checkOutDate:""},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;E.get("/hotels/".concat(t)).then(function(t){e.setState(function(){return{hotel:t.data,isLoaded:!0}})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return l.a.createElement("div",null,this.state.isLoaded?l.a.createElement("div",{className:"mt-5"},l.a.createElement("div",{className:"jumbotron jumbotron-fluid"},l.a.createElement("div",{className:"container"},l.a.createElement("h1",{className:"display-4"},this.state.hotel.name),l.a.createElement(b,{rating:this.state.hotel.reviews[0].rating}),l.a.createElement("p",{className:"lead"},this.state.hotel.categories,"   "),l.a.createElement("p",null,l.a.createElement("button",{className:"btn btn-primary",onClick:this.handleBook},"Book rooms"),this.state.displayAlert&&l.a.createElement("span",{className:"alert alert-danger alert-dismissible ml-2"},"Please login to book rooms",l.a.createElement(h.b,{to:"/users/signin"},"Click here to login")))),this.state.viewForm&&l.a.createElement("div",null,l.a.createElement("form",{className:"border ml-5 mr-5",onSubmit:this.handleForm},l.a.createElement("div",{className:"row mb-2 "},l.a.createElement("div",{className:"col"},l.a.createElement("input",{type:"text",className:"form-control",name:"name",value:this.state.name,onChange:this.handleChange,placeholder:"Name"})),l.a.createElement("div",{className:"col"},l.a.createElement("input",{type:"email",className:"form-control",name:"email",value:this.state.email,onChange:this.handleChange,placeholder:"Email"}))),l.a.createElement("div",{className:"row mb-2"},l.a.createElement("div",{className:"col"},l.a.createElement("input",{type:"text",className:"form-control",name:"mobile",value:this.state.mobile,onChange:this.handleChange,placeholder:"Mobile number"})),l.a.createElement("div",{className:"col"},l.a.createElement("input",{type:"text",className:"form-control",name:"noGuests",value:this.state.noGuests,onChange:this.handleChange,placeholder:"No of guests"}))),l.a.createElement("div",{className:"row mb-2"},l.a.createElement("div",{className:"col"},l.a.createElement("input",{type:"date",className:"form-control",name:"checkInDate",value:this.state.checkInDate,onChange:this.handleChange,placeholder:"Check-In date"})),l.a.createElement("div",{className:"col"},l.a.createElement("input",{type:"date",className:"form-control",name:"checkOutDate",value:this.state.checkOutDate,onChange:this.handleChange,placeholder:"Check-out-date"}))),l.a.createElement("div",{className:"row mb-2"},l.a.createElement("div",{className:"col-md-8 offset-2"},l.a.createElement("button",{className:"btn btn-primary"},"Book"))))),l.a.createElement("div",{id:"carouselExampleControls",className:"carousel slide","data-ride":"carousel"},l.a.createElement("div",{className:"carousel-inner"},l.a.createElement("div",{className:"carousel-item active"},l.a.createElement("img",{className:"d-block w-100",src:"https://via.placeholder.com/50x50",alt:"First slide",style:{height:"500px",width:"100px"}})),l.a.createElement("div",{className:"carousel-item"},l.a.createElement("img",{className:"d-block w-100",src:"https://via.placeholder.com/50x51",alt:"Second slide",style:{height:"500px",width:"100px"}})),l.a.createElement("div",{className:"carousel-item"},l.a.createElement("img",{className:"d-block w-100",src:"https://via.placeholder.com/50x52",alt:"Third slide",style:{height:"500px",width:"100px"}}))),l.a.createElement("a",{className:"carousel-control-prev",href:"#carouselExampleControls",role:"button","data-slide":"prev"},l.a.createElement("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),l.a.createElement("span",{className:"sr-only"},"Previous")),l.a.createElement("a",{className:"carousel-control-next",href:"#carouselExampleControls",role:"button","data-slide":"next"},l.a.createElement("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),l.a.createElement("span",{className:"sr-only"},"Next"))),l.a.createElement("div",{className:"ml-4"},l.a.createElement("h1",null,"Reviews"),l.a.createElement("h3",null,this.state.hotel.reviews[0].username),l.a.createElement("p",null,this.state.hotel.reviews[0].text)))):l.a.createElement(v,null))}}]),t}(l.a.Component),x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t={usernameOrEmail:a.state.email,password:a.state.password};E.post("/users/login",t).then(function(e){e.data.errors?a.setState(function(){return{errors:e.data.errors,password:""}}):(localStorage.setItem("token",e.data.token),a.props.history.push("/"),a.props.handleAuthentication(!0))})},a.handleChange=function(e){e.persist(),a.setState(function(){return Object(C.a)({},e.target.name,e.target.value)})},a.state={email:"",password:"",errors:""},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"row mt-4"},l.a.createElement("div",{className:"col-md-6 offset-3 mt-4"},l.a.createElement("h2",null,"Login "),l.a.createElement("form",{onSubmit:this.handleSubmit},this.state.errors&&l.a.createElement("p",{className:"alert alert-danger"},this.state.errors),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"email",l.a.createElement("input",{type:"text",name:"email",value:this.state.email,onChange:this.handleChange,className:"form-control",placeholder:"your email"}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"password",l.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,className:"form-control",placeholder:"your password"}))),l.a.createElement("input",{type:"submit",className:"btn btn-primary"}))))}}]),t}(l.a.Component),D=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){e.persist(),a.setState(function(){return Object(C.a)({},e.target.name,e.target.value)})},a.handleSubmit=function(e){e.preventDefault();var t={username:a.state.username,email:a.state.email,password:a.state.password};E.post("/users/register",t).then(function(e){e.data.errors?a.setState(function(){return{errors:e.data.errors}}):a.props.history.push("/users/signin")})},a.state={username:"",email:"",password:"",errors:{}},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"row mt-4"},l.a.createElement("div",{className:"col-md-6 offset-3 mt-4"},l.a.createElement("h2",null,"Register with us "),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("div",{className:"form-group mt-4"},l.a.createElement("label",null,"username",l.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange,className:"form-control",placeholder:"your username"}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"email",l.a.createElement("input",{type:"text",name:"email",value:this.state.email,onChange:this.handleChange,className:"form-control",placeholder:"your email"}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"password",l.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,className:"form-control",placeholder:"your password"}))),l.a.createElement("input",{type:"submit",className:"btn btn-primary"}))))}}]),t}(l.a.Component),L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h1",null,"Account page"))}}]),t}(l.a.Component),A=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleAuthentication=function(e){a.setState(function(){return{isAuthenticated:e}})},a.state={isAuthenticated:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){localStorage.getItem("token")&&this.setState(function(){return{isAuthenticated:!0}})}},{key:"render",value:function(){var e=this;return l.a.createElement(h.a,null,l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"topnav fixed-top mb-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement(h.b,{to:"/",className:"nav-item nav-link"},"Home"),l.a.createElement(h.b,{to:"/about",className:"nav-item nav-link"},"About"),l.a.createElement(h.b,{to:"/contact",className:"nav-item nav-link"}," Contact")),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6 offset-md-3 mt-2"},l.a.createElement("h3",{style:{color:"orange"}},"Hotel booking app")))),l.a.createElement("div",{className:"col-md-3"},this.state.isAuthenticated?l.a.createElement(l.a.Fragment,null,l.a.createElement(h.b,{to:"/users/account",className:"nav-item nav-link"},"Account"),l.a.createElement(h.b,{to:"/users/logout",className:"nav-item nav-link"},"Sign out")):l.a.createElement(l.a.Fragment,null,l.a.createElement(h.b,{to:"/users/signin",className:"nav-item nav-link"}," Sign in "),l.a.createElement(h.b,{to:"/users/signup",className:"nav-item nav-link"}," Sign up "))))),l.a.createElement("div",{className:"row mt-3"}),l.a.createElement(d.a,{path:"/",component:j,exact:!0}),l.a.createElement(d.a,{path:"/hotels/:id",component:S}),l.a.createElement(d.a,{path:"/users/signin",render:function(t){return l.a.createElement(x,Object.assign({},t,{handleAuthentication:e.handleAuthentication}))}}),l.a.createElement(d.a,{path:"/users/logout",render:function(t){E.delete("/users/logout",{headers:{"x-auth":localStorage.getItem("token")}}).then(function(a){t.history.push("/users/signin"),e.setState(function(){return{isAuthenticated:!1}}),localStorage.removeItem("token")})}}),l.a.createElement(d.a,{path:"/users/account",component:L}),l.a.createElement(d.a,{path:"/users/signup",component:D})))}}]),t}(n.Component);a(80);s.a.render(l.a.createElement(A,null),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.ab8c56b6.chunk.js.map