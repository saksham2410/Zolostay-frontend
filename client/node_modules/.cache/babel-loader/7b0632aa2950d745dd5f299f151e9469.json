{"ast":null,"code":"import _defineProperty from \"/Users/saksham/Desktop/Hotel-Booking/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/saksham/Desktop/Hotel-Booking/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/saksham/Desktop/Hotel-Booking/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/saksham/Desktop/Hotel-Booking/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/saksham/Desktop/Hotel-Booking/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/saksham/Desktop/Hotel-Booking/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/saksham/Desktop/Hotel-Booking/client/src/components/users/Login.js\";\nimport React from 'react';\nimport axios from '../../config/axios';\n\nvar Login =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Login, _React$Component);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this, props));\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      var formData = {\n        usernameOrEmail: _this.state.email,\n        password: _this.state.password\n      };\n      axios.post('/users/login', formData).then(function (response) {\n        if (response.data.errors) {\n          _this.setState(function () {\n            return {\n              errors: response.data.errors,\n              password: ''\n            };\n          });\n        } else {\n          localStorage.setItem('token', response.data.token);\n\n          _this.props.history.push('/');\n\n          _this.props.handleAuthentication(true);\n        }\n      });\n    };\n\n    _this.handleChange = function (e) {\n      e.persist();\n\n      _this.setState(function () {\n        return _defineProperty({}, e.target.name, e.target.value);\n      });\n    };\n\n    _this.state = {\n      email: '',\n      password: '',\n      errors: ''\n    };\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"row mt-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-6 offset-3 mt-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, \"Login \"), React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, this.state.errors && React.createElement(\"p\", {\n        className: \"alert alert-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, this.state.errors), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, \"email\", React.createElement(\"input\", {\n        type: \"text\",\n        name: \"email\",\n        value: this.state.email,\n        onChange: this.handleChange,\n        className: \"form-control\",\n        placeholder: \"your email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, \"password\", React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        value: this.state.password,\n        onChange: this.handleChange,\n        className: \"form-control\",\n        placeholder: \"your password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }))), React.createElement(\"input\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return Login;\n}(React.Component);\n\nexport default Login;","map":{"version":3,"sources":["/Users/saksham/Desktop/Hotel-Booking/client/src/components/users/Login.js"],"names":["React","axios","Login","props","handleSubmit","e","preventDefault","formData","usernameOrEmail","state","email","password","post","then","response","data","errors","setState","localStorage","setItem","token","history","push","handleAuthentication","handleChange","persist","target","name","value","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport axios from '../../config/axios'\r\n\r\nclass Login extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            email: '',\r\n            password: '',\r\n            errors: ''\r\n        }\r\n    }\r\n\r\n    handleSubmit = (e) => {\r\n        e.preventDefault()\r\n        const formData = {\r\n            usernameOrEmail: this.state.email,\r\n            password: this.state.password\r\n        }\r\n\r\n        axios.post('/users/login', formData)\r\n            .then(response => {\r\n                if (response.data.errors) {\r\n                    this.setState(() => ({\r\n                        errors: response.data.errors,\r\n                        password: ''\r\n                    }))\r\n                } else {\r\n                    localStorage.setItem('token', response.data.token)\r\n                    this.props.history.push('/')\r\n                    this.props.handleAuthentication(true)\r\n                }\r\n            })\r\n    }\r\n\r\n    handleChange = (e) => {\r\n        e.persist()\r\n        this.setState(() => ({\r\n            [e.target.name]: e.target.value\r\n        }))\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"row mt-4\">\r\n            <div className=\"col-md-6 offset-3 mt-4\">\r\n                <h2>Login </h2>\r\n                <form onSubmit={this.handleSubmit}>\r\n                    { this.state.errors && <p className=\"alert alert-danger\">{ this.state.errors}</p> }\r\n                    <div className=\"form-group\">\r\n                        <label>\r\n                            email\r\n                            <input type=\"text\"\r\n                                name=\"email\"\r\n                                value={this.state.email}\r\n                                onChange={this.handleChange}\r\n                                className=\"form-control\"\r\n                                placeholder=\"your email\"\r\n                            />\r\n                        </label>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label>\r\n                            password\r\n                            <input type=\"password\"\r\n                                name=\"password\"\r\n                                value={this.state.password}\r\n                                onChange={this.handleChange}\r\n                                className=\"form-control\"\r\n                                placeholder=\"your password\"\r\n                            />\r\n                        </label>\r\n                    </div>\r\n\r\n                    <input type=\"submit\" className=\"btn btn-primary\" />\r\n                </form>\r\n            </div>\r\n        </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default Login"]},"metadata":{},"sourceType":"module"}